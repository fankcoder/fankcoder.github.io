<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]--> <title>第N次折腾vps科学上网，解决方案笔记</title> <meta name="description" content="背景过去记得第一打开谷歌，是在初中的某一天，和当时的我熟悉的百度比较，除了它的Logo比较新颖之外，印象最深的就是这个网站，与国内所有的搜索引擎不同，它不能在线听歌，那时候正是国内盗版软件光盘盛行的时候，关心音乐的版权更是极少的。"> <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="http://localhost:4000/%E5%B7%A5%E5%85%B7/2019/04/02/ss_config.html"> <link rel="alternate" type="application/rss+xml" title="Fank" href="http://localhost:4000/feed.xml" /> <script src="/assets/js/prefixfree.js"></script> </head> <body> <aside id="sidebar"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/"> <img id="sidebar-avatar-img" alt="" src="/assets/img/avatar.jpg"/> </a> <div id="sidebar-social"> <a href="/feed.xml" class="sidebar-social-icon feed"></a> <a href="mailto:fankcoder@gmail.com" class="sidebar-social-icon email"></a> <a href="http://www.weibo.com/u/2424646683" class="sidebar-social-icon weibo" target="_blank"></a> <a href="https://github.com/fankcoder" class="sidebar-social-icon github" target="_blank"></a> </div> <ul id="sidebar-tags"> <li class="sidebar-tag active" data-filter="all">全部文章</li> <li class="sidebar-tag" data-filter="备忘">备忘</li> <li class="sidebar-tag" data-filter="工具">工具</li> <li class="sidebar-tag" data-filter="技术">技术</li> <li class="sidebar-tag" data-filter="生活">生活</li> <li class="sidebar-tag" data-filter="About">About</li> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2019/05/21/MySQL-optimize.html"> MySQL亿级表优化 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2019/05/01/django-drf-learn.html"> Django深入学习笔记 </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2019/04/28/fix-chrome-darkmode.html"> 在mojave深色模式下，禁用chrome的深色主题 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2019/04/04/general-docker.html"> Docker 常用 </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2019/04/02/ss_config.html"> 第N次折腾vps科学上网，解决方案笔记 </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2019/03/08/vscode.html"> vscode配置手册 </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2019/03/08/mac-tools.html"> mac使用手册 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2019/03/08/python-deep.html"> Python深入学习笔记 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2019/03/08/appspider-tools.html"> Ubuntu&OSX的app抓包方案 </a> <a class="toc-link" data-tags="About" href="/about/2019/03/08/HeyUFindMe.html"> Hey, U find me! </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2019/02/01/vim.html"> vim使用手册 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2019/01/15/general-javascript-resources.html"> JavaScript 常用资源 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2019/01/12/threading-python.html"> Python线程&进程&协程&asyncio </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2019/01/02/algorithem.html"> 算法&数据结构 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2019/01/01/SQL-pratice.html"> SQL练习 </a> <a class="toc-link" data-tags="生活" href="/%E7%94%9F%E6%B4%BB/2019/01/01/life-time-manage.html"> 时间和人生感悟 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2016/11/01/chmod.html"> chmod命令 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2016/03/10/screen-linux.html"> screen工具 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2016/03/08/todolist-django-python.html"> Todolist 应用 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2016/03/04/general-linux-resources.html"> Linux 常用资源 </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2016/01/28/good-tools.html"> 神器收藏 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2016/01/27/general-django-resource.html"> Django命令备忘录 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2016/01/25/amazon-spider-python.html"> 爬虫防屏蔽 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2016/01/20/add-static-django-python.html"> Django添加静态文件 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2016/01/11/encode-python.html"> Python转码问题 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/12/29/xrange-python.html"> Python的xrange和range </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2015/11/10/vpn-tools.html"> 科学上网列表 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/10/26/email-shell-linux.html"> Shell每日发邮件 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/10/13/passwd-python.html"> Python密码处理 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/10/12/os-python.html"> Python标准库os </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/08/25/re-python.html"> Python正则 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/08/11/func-python.html"> Python内置函数(map、reduce、filter) </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/07/25/awk-linux.html"> AWK </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/07/24/blog-django-python.html"> Django练习项目之搭建博客 </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/05/22/xlrd-python.html"> 用xlrd\xlwt读写excel </a> <a class="toc-link" data-tags="技术" href="/%E6%8A%80%E6%9C%AF/2015/01/01/chromium-flash-linux.html"> chromium安装flash </a> <a class="toc-link" data-tags="工具" href="/%E5%B7%A5%E5%85%B7/2014/12/24/ubuntu-tools.html"> Ubuntu常用 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/09/15/general-git-resources.html"> Git 常用命令 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/05/11/general-mysql-resources.html"> MySQL常用资源 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/04/23/general-bootstrap-resources.html"> Bootstrap常用资源 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/01/15/general-svn-resources.html"> SVN 常用资源 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/01/15/general-shell-resources.html"> Shell 常用资源 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/01/15/general-python-resources.html"> Python 常用资源 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/01/15/general-jquery-resources.html"> jQuery 常用资源 </a> <a class="toc-link" data-tags="备忘" href="/%E5%A4%87%E5%BF%98/2014/01/15/general-html-resources.html"> HTML 常用 </a> </nav> </div> </aside> <main id="main"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2019 April 02</span> <span class="post-meta-span tag">ss, google</span> </div> <h1 class="post-title">第N次折腾vps科学上网，解决方案笔记</h1> <h1 id="背景">背景</h1> <h2 id="过去">过去</h2> <p>记得第一打开谷歌，是在初中的某一天，和当时的我熟悉的百度比较，除了它的Logo比较新颖之外，印象最深的就是这个网站，与国内所有的搜索引擎不同，它不能在线听歌，那时候正是国内盗版软件光盘盛行的时候，关心音乐的版权更是极少的。</p> <h2 id="后来">后来</h2> <p>有一天在大学机房做实验，老师闲聊说谷歌以后不能访问了，我听过也没太在意，因为在我意识中互联网世界就是同一个虚拟世界，可惜从那以后对我来说它就不再是了。之后的事大家都知道了，百度虚假广告越来越多，在当时我有很长一段时间都觉得，使用搜索引擎是一件极其痛苦的事，每当我在百度查找需要的东西，我大概需要过滤掉80%无用的信息，其中30%是广告，30%是色情信息，20%是无关信息。于是我将系统hosts替换，重新使用起了谷歌。</p> <h2 id="再后来">再后来</h2> <p>替换hosts这个方法我大概使用了2，3年之久（首先因为免费，其次它比某些收费vpn访问速度还快，缺点是不能看youtube视频） 这时候我已经是一名谷歌重度使用者了。 在2015年7月10号，那段时间hosts经常不稳定，找到了一篇用vps搭建ss的教程，在搬瓦工购入了一台vps，从此开始了vps搭建ss的折腾之旅</p> <h1 id="目前的完美折腾方案">目前的完美折腾方案</h1> <p>由于我的vps购入比较早，19.9$/Y（现在应该买不到了）它还是古老的OVZ架构，虽然便宜，但很遗憾它不能享用bbr加速方案。 我尝试切换过几个机房，洛杉矶的速度不错，可以在youtube看1080p的视频。</p> <h3 id="已一台刚装好的centos65为例">已一台刚装好的centOS6.5为例</h3> <p>安装git&amp;ss，此步骤安装最新的ss，不建议安装老版本ss</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install git
pip install https://github.com/shadowsocks/shadowsocks/archive/master.zip -U
</code></pre></div></div> <p>配置ss</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim /etc/shadowdowsocks.json
</code></pre></div></div> <p>配置ss例子，端口写不常用的，并且的越随意越好，记得不要超过65535</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{                                  
    "server":"my_server_ip",          //服务器的IP地址
    "server_port":7711,              //服务器的端口，
    "local_address": "127.0.0.1",       //本机IP地址
    "local_port":1080,               //本机端口
    "password":"mypassword",        //自己设定的密码
    "timeout":600,                  //超出时间
    "method":"chacha20-ietf-poly1305",          //加密方法，推荐使用"chacha20-ietf-poly1305"算法需要额外安装
    "fast_open": false                //true 或 false}
}

# 若是多用户模式，将server_port和password合并为port_password：
"port_password": {
         "443": " mypassword 1”,  //对应端口设定不同的密码
         "8888": " mypassword 2”
     },
</code></pre></div></div> <p>安装gevent，如果使用Python2，高版本的gevent可能会安装失败，官方推荐1.1版本</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ yum install -y libevent
$ pip install greenlet
$ pip install gevent==1.1
</code></pre></div></div> <p>强烈使用推荐的chacha20-ietf算法。安装新算法需要先安装libsodium</p> <p>直接安装or编译安装随心情</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install epel-release
yum install libsodium
</code></pre></div></div> <p>or</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y groupinstall "Development Tools"
wget https://github.com/jedisct1/libsodium/releases/download/1.0.15/libsodium-1.0.15.tar.gz
tar xf libsodium-1.0.15.tar.gz &amp;&amp; cd libsodium-1.0.15
./configure &amp;&amp; make -j2 &amp;&amp; make install
echo /usr/local/lib &gt; /etc/ld.so.conf.d/usr_local_lib.conf
ldconfig
</code></pre></div></div> <p>启动ss服务</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssserver -c /etc/shadowsocks.json
# 若想让ss一直在后台运行，可运行：
nohup ssserver -c /etc/shadowsocks.json &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre></div></div> <p>客户端</p> <p>macos: ShadowsocksX-NG</p> <p>win: https://shadowsocks.org/en/download/clients.html</p> <p>android: 可以先从pc下个apk传到手机（或者免费vpn有很多临时用下不错）再用gg play更新/下载</p> <p>ios:wingy</p> <h2 id="kcptun">kcptun</h2> <h4 id="参考文档">参考文档</h4> <p>https://github.com/easonhuang123/blog/issues/1</p> <p>https://github.com/shadowsocksrr/shadowsocks-rss/wiki/libsodium</p> <p>下面是一篇升级glibc的文章，我的确升级成功了，但是bbr还是用不了，放弃了 https://cnodejs.org/topic/56dc21f1502596633dc2c3dc</p> </article> <div class="post-share"> <div class="container"> <a href="https://twitter.com/share?url=http://localhost:4000/%E5%B7%A5%E5%85%B7/2019/04/02/ss_config.html&text=第N次折腾vps科学上网，解决方案笔记" target="_blank" class="post-share-icon twitter"></a> <a href="https://www.evernote.com/clip.action?url=http://localhost:4000/%E5%B7%A5%E5%85%B7/2019/04/02/ss_config.html&title=第N次折腾vps科学上网，解决方案笔记" target="_blank" class="post-share-icon evernote"></a> <a href="http://service.weibo.com/share/share.php?url=http://localhost:4000/%E5%B7%A5%E5%85%B7/2019/04/02/ss_config.html&title=第N次折腾vps科学上网，解决方案笔记" target="_blank" class="post-share-icon weibo"></a> </div> </div> <div class="footer"> <div class="container"> <p class="footer-entry">All content is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a></p> <p class="footer-entry">Buit with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll theme</a> • Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> </main> <button id="menu"> <span id="menu-icons"></span> </button> <script src="/assets/js/jquery-2.1.3.min.js"></script> <script src="/assets/js/jquery.pjax.js"></script> <script src="/assets/js/nprogress.js"></script> <script src="/assets/js/main.js"></script> <!-- --> </body> </html>
